<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì‘ì—… ì˜ìƒ ì—…ë¡œë“œ | ë§¤ì§„ë‚¨ íŒŒíŠ¸ë„ˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <link rel="apple-touch-icon" href="/static/logo.svg">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pretendard:wght@400;700;900&display=swap');
        body { font-family: 'Pretendard', sans-serif; }
    </style>
</head>
<body class="bg-slate-50 flex items-center justify-center min-h-screen">
    <div class="bg-white p-10 rounded-[2.5rem] shadow-2xl w-full max-w-lg">
        <div class="text-center mb-6">
            <img src="/static/logo.svg" alt="MaejinNam" class="mx-auto mb-4 w-16 h-16 object-cover rounded-full">
            <h2 class="text-2xl font-black text-slate-900 mb-8 text-center">ì‘ì—… ì˜ìƒ ì—…ë¡œë“œ</h2>
        </div>
        <form action="/expert/submit_job" method="POST" enctype="multipart/form-data" class="space-y-8">
            <input type="hidden" name="lat" id="lat">
            <input type="hidden" name="lng" id="lng">
            <div id="manual-loc" class="hidden mt-4">
                <label class="block text-sm font-bold text-slate-700">ìœ„ì¹˜ ì§ì ‘ ì…ë ¥ (ê¶Œí•œì´ ì—†ì„ ê²½ìš°)</label>
                <div class="flex space-x-2 mt-2">
                    <input type="text" id="manual-lat" placeholder="ìœ„ë„" class="w-1/2 px-4 py-3 rounded-2xl bg-slate-50 border border-slate-200" />
                    <input type="text" id="manual-lng" placeholder="ê²½ë„" class="w-1/2 px-4 py-3 rounded-2xl bg-slate-50 border border-slate-200" />
                </div>
                <button type="button" onclick="applyManualLocation()" class="mt-3 bg-slate-900 text-white px-4 py-2 rounded-xl">ì ìš©</button>
            </div>
            <div class="space-y-4">
                <label class="block text-sm font-bold text-slate-700">ì„œë¹„ìŠ¤ ì¹´í…Œê³ ë¦¬ ì„ íƒ</label>
                <select name="category" id="category-select" onchange="updatePrice()" class="w-full px-6 py-4 rounded-2xl bg-slate-50 border border-slate-200 outline-none">
                    <option value="CLEAN">ğŸ§¹ ì²­ì†Œ ë§¤ì§„ (50,000ì›)</option>
                    <option value="RENTAL">ğŸ¤– ë Œíƒˆ ë§¤ì§„ (30,000ì›)</option>
                    <option value="INTERNET">ğŸŒ í†µì‹  ë§¤ì§„ (70,000ì›)</option>
                    <option value="CARE">ğŸš‘ ì¼€ì–´ ë§¤ì§„ (40,000ì›)</option>
                </select>
                <div class="p-6 bg-blue-50 rounded-2xl border border-blue-100 mt-6">
                    <p class="text-blue-600 text-xs font-bold uppercase mb-1">ì •ì‚° ì˜ˆì • ê¸ˆì•¡</p>
                    <p id="display-price" class="text-2xl font-black text-slate-900">â‚©50,000</p>
                </div>
            </div>
            <div class="border-2 border-dashed border-blue-200 rounded-2xl p-8 text-center bg-blue-50">
                <input type="file" name="video" id="video" accept="video/*" required class="hidden">
                <label for="video" class="cursor-pointer">
                    <div class="text-4xl mb-2 text-blue-600"><i class="fa-solid fa-video"></i></div>
                    <span class="text-blue-600 font-bold">ì‘ì—… ì˜ìƒ ì„ íƒ/ì´¬ì˜</span>
                    <p class="text-xs text-blue-400 mt-2">ìµœëŒ€ 500MBê¹Œì§€ ì—…ë¡œë“œ ê°€ëŠ¥</p>
                </label>
            </div>
            <button type="submit" class="w-full bg-blue-600 text-white py-4 rounded-2xl font-black text-lg hover:bg-blue-700 transition shadow-lg shadow-blue-200">ì—…ë¡œë“œ ë° ì •ì‚° ìš”ì²­</button>
        </form>
    </div>
    <script>
        function updatePrice() {
            const prices = { 'CLEAN': '50,000', 'RENTAL': '30,000', 'INTERNET': '70,000', 'CARE': '40,000' };
            const selected = document.getElementById('category-select').value;
            document.getElementById('display-price').innerText = 'â‚©' + prices[selected];
        }
        // ìœ„ì¹˜ ì •ë³´ ìë™ ìˆ˜ì§‘ ìŠ¤í¬ë¦½íŠ¸
        navigator.geolocation.getCurrentPosition((pos) => {
            document.getElementById('lat').value = pos.coords.latitude;
            document.getElementById('lng').value = pos.coords.longitude;
            console.log("í˜„ì¥ ìœ„ì¹˜ íŒŒì•… ì™„ë£Œ");
        }, (err) => {
            console.warn("Geolocation error:", err);
            document.getElementById('manual-loc').classList.remove('hidden');
            alert('ìœ„ì¹˜ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤. ìˆ˜ë™ìœ¼ë¡œ ìœ„ë„/ê²½ë„ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        });

        function applyManualLocation(){
            const lat = document.getElementById('manual-lat').value;
            const lng = document.getElementById('manual-lng').value;
            if(!lat || !lng){
                alert('ìœ„ë„ì™€ ê²½ë„ë¥¼ ëª¨ë‘ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }
            document.getElementById('lat').value = lat;
            document.getElementById('lng').value = lng;
            alert('ìˆ˜ë™ ìœ„ì¹˜ê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }
    </script>
</body>
</html>